<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:url" content="https://is.wasteof.money" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Is it a waste of money?" />
    <meta property="og:description" content="Find out if a product is a waste of money." />
    <meta property="og:image" content="/assets/logo.png" />
    <meta property="og:site_name" content="is.wasteof.money" />
    <link rel="icon" href="/assets/logo.png">
    <title>is.wasteof.money</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.0.0"></script>
</head>
<body>
    <header>
        <a class="noline"href="/"><h1>is.wasteof.money</h1></a>
        <a href="/about">about</a> | <a href="https://github.com/JeffaloBob/is.wasteof.money/">github</a>
        <hr> 
    </header>   
    <main>
        <div class="incontainer"><strong class="thething">Is <input oninput="check()" spellcheck="false" id="input" type="text"> a waste of money?</strong></div>
        <div id="result" class="result">Try to type something!</div>
    </main>
</body>
<script>
    const result = document.getElementById('result');
    const input  = document.getElementById('input');
    const items  = [
        {name: 'iphone', isWaste: true},
        {name: 'android', isWaste: false},
        {name: 'minecraft', isWaste: false},
        {name: 'air', isWaste: 'free'},
        {name: 'https', isWaste: 'free'},
        {name: 'this website', isWaste: true},
        {name: 'optifine', isWaste: 'free'},
        {name: 'optifine cape', isWaste: false},
        {name: 'samsung', isWaste: true},
        {name: 'google', isWaste: 'free'},
        {name: 'james', isWaste: true},
        {name: 'minecraft bedrock', isWaste: true},
        {name: 'fortnite', isWaste: 'free'},
        {name: 'money', isWaste: true},
        {name: 'netflix', isWaste: true},
        {name: 'hulu', isWaste: true},
        {name: 'youtube red', isWaste: true},
        {name: 'humble bundle', isWaste: true},
        {name: 'pizza', isWaste: false}
    ];

    // 2. Set up the Fuse instance
    const fuse = new Fuse(items, {
        keys: ['name'],
        threshold: 0.3,
        minMatchCharLength: 2
    })

    const generateFuseMessage = term => {
        term = term.toLowerCase();

        if (term.length < 3)
            return "Not found yet... keep trying?";
        
        const fuseResults = fuse.search(term);
        let message = "Did you mean: ";

        for (let item of fuseResults)
            message += item.item.name + ",";

        return message != "Did you mean: "? message.slice(0, -1): "Not found yet... keep trying?";
    }

    const check = () => {
        let found = items.find(item => item.name == input.value.toLowerCase());
        isWaste = found? found.isWaste: "undefined";

        result.innerText =  {"free": "its free you idot", true: "yes", false: "no", "undefined": generateFuseMessage(input.value)}[isWaste];
    }

</script>
</html>

